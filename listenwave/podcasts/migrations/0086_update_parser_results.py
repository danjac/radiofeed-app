# Generated by Django 6.0 on 2025-12-18 10:30

from django.db import migrations


def update_parser_results(apps, schema_editor):
    Podcast = apps.get_model("podcasts", "Podcast")

    Podcast.objects.filter(parser_result="unavailable").update(
        parser_result="temporary_network_error"
    )

    Podcast.objects.filter(parser_result="invalid_data").update(
        parser_result="database_error"
    )


def reverse_parser_results(apps, schema_editor):
    Podcast = apps.get_model("podcasts", "Podcast")

    Podcast.objects.filter(
        parser_result__in=("temporary_network_error", "permanent_network_error")
    ).update(parser_result="unavailable")

    Podcast.objects.filter(parser_result="database_error").update(
        parser_result="invalid_data"
    )


class Migration(migrations.Migration):
    dependencies = [
        ("podcasts", "0085_alter_podcast_parser_result"),
    ]

    operations = [
        migrations.RunPython(update_parser_results, reverse_parser_results),
    ]
