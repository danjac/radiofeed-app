{% extends "base.html" %}
{% load head_tags heroicons %}
{% block title %}
    {% title_tag "Settings" "Delete Account" %}
{% endblock title %}

{% block content %}
    {% if user.is_authenticated %}
        {% include "account/header.html" with icon="trash" label="Delete Account" %}
        <div class="space-y-6">
            <div class="space-y-3">
                <p>Please confirm that you want to delete your account. You will not be able to undo this action!</p>
                <p>This will permanently delete ALL your data including your subscriptions, bookmarks and listening history.</p>
            </div>
            {% fragment "form.html" hx_disable=True %}
                {{ form }}
                {% fragment "form.html#buttons" %}
                    <button class="btn btn-danger">
                        {% heroicon_mini "trash" class="mr-2" %}
                        Yes, delete my account
                    </button>
                {% endfragment %}
            {% endfragment %}
        </div>
    {% else %}
        {% include "header.html" with title="Delete Account" %}
        <div class="space-y-3">
            <p>
                You must be logged in to delete your data. All user data, including subscriptions, bookmarks and listening history, will be irrevocably deleted.
            </p>
            <p>
                More details on our data policy can be found <a class="underline link" href="{% url "privacy" %}">here</a>.
            </p>
            <p>
                <a class="underline link"
                   href="{% url "account_login" %}{% querystring next=request.path|urlencode %}">Please log in to delete your account</a>
            </p>
        </div>
    {% endif %}
{% endblock content %}
