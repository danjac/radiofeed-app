{% load cache %}
<c-layout title="{{ podcast.cleaned_title }} | {{ season }}">
    <c-podcasts.header active="episodes">
        {% cache cache_timeout podcast-episodes-nav request.get_full_path %}
            {% with num_episodes=podcast.num_episodes page_size=page.page_size episodes_url=podcast.get_episodes_url %}
                <c-header.nav>
                    <c-header.nav.item>
                        <c-header.nav.dropdown :label="season" id="seasons-dropdown">
                            <c-header.nav.dropdown.item :url="episodes_url">
                                All Seasons
                            </c-header.nav.dropdown.item>
                            {% for season in podcast.seasons %}
                                <c-header.nav.dropdown.item :url="season.url">
                                    {{ season }}
                                </c-header.nav.dropdown.item>
                            {% endfor %}
                        </c-header.nav.dropdown>
                    </c-header.nav.item>
                    {% if num_episodes > page_size %}
                        <c-header.nav.item>
                            <c-search.form
                                placeholder="Search: Podcast"
                                :url="episodes_url"
                                clearable />
                        </c-header.nav.item>
                    {% endif %}
                </c-header.nav>
            {% endwith %}
        {% endcache %}
    </c-podcasts.header>
    {% partialdef pagination inline %}
        {% cache cache_timeout podcast-episodes request.get_full_path %}
            <c-paginate :page="page">
                {% for episode in page %}
                    <c-browse.item>
                        <c-podcasts.episode :episode="episode" />
                    </c-browse.item>
                {% empty %}
                    <c-browse.empty>
                        This season does not have any episodes.
                    </c-browse.empty>
                {% endfor %}
            </c-paginate>
        {% endcache %}
    {% endpartialdef pagination %}
</c-layout>
