{% extends "base.html" %}
{% load cache %}

{% block title %}
    {% title_tag "Categories" category.name %}
{% endblock title %}

{% block content %}
    {% blockinclude "header.html" %}
        {% blockinclude "header.html#title" %}
            {{ category.name }} Podcasts
        {% endblockinclude %}
        {% if request.search or page.has_other_pages %}
            {% blockinclude "header/nav.html" %}
                {% if request.search %}
                    {% blockinclude "header/nav.html#item" %}
                        {% url "podcasts:search_podcasts" as search_button_url %}
                        {% include "header/nav/search.html#button" with label="Search Podcasts" %}
                    {% endblockinclude %}
                {% endif %}
                {% blockinclude "header/nav.html#item" %}
                    {% include "header/nav/search.html#form" with clearable=True %}
                {% endblockinclude %}
            {% endblockinclude %}
        {% endif %}
    {% endblockinclude %}
    {% partialdef pagination inline %}
        {% cache cache_timeout category-podcasts request.get_full_path %}
            {% blockinclude "paginate.html" %}
                {% for podcast in page %}
                    {% blockinclude "browse.html#item" %}
                        {% include "podcasts/cards.html#podcast" %}
                    {% endblockinclude %}
                {% empty %}
                    {% blockinclude "browse.html#empty" %}
                        {% if request.search %}
                            No {{ category.name }} podcasts found for &quot;<strong>{{ request.search.value }}</strong>&quot;.
                        {% else %}
                            Category {{ category.name }} does not have any podcasts.
                        {% endif %}
                    {% endblockinclude %}
                {% endfor %}
            {% endblockinclude %}
        {% endcache %}
    {% endpartialdef pagination %}
{% endblock content %}
