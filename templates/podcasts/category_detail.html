{% load cache %}
<c-layout title="Categories | {{ category.name }} Podcasts">
    <c-header :title="category.name">
        {% if request.search or page.has_other_pages %}
            <c-header.nav>
                {% if request.search %}
                    <c-header.nav.item>
                        <c-search.button url="{% url 'podcasts:search_podcasts' %}">
                            Search Podcasts
                        </c-search.button>
                    </c-header.nav.item>
                {% endif %}
                <c-header.nav.item>
                    <c-search.form placeholder="Search: {{ category.name }}" clearable />
                </c-header.nav.item>
            </c-header.nav>
        {% endif %}
    </c-header>

    {% partialdef pagination inline %}
        {% cache cache_timeout category-podcasts request.get_full_path %}
            <c-paginate :page="page">
                {% for podcast in page %}
                    <c-browse.item>
                        <c-podcasts.podcast :podcast="podcast" />
                    </c-browse.item>
                {% empty %}
                    <c-browse.empty>
                        {% if request.search %}
                            No {{ category.name }} podcasts found for &quot;<strong>{{ request.search.value }}</strong>&quot;.
                        {% else %}
                            Category {{ category.name }} does not have any podcasts.
                        {% endif %}
                    </c-browse.empty>
                {% endfor %}
            </c-paginate>
        {% endcache %}
    {% endpartialdef pagination %}
</c-layout>
