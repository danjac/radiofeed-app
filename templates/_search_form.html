{% load heroicons %}
<form action="{{ search_url|default:request.path }}"
      method="get"
      class="relative bg-transparent"
      x-data="{search: '{{ request.search.value|default:''|escapejs }}'}"
      hx-push-url="true">
    <input type="search"
           name="{{ request.search.param }}"
           class="py-1 px-2 w-64 text-sm placeholder-opacity-100 text-gray-900 rounded md:text-base dark:text-white dark:bg-gray-900 focus:ring focus:outline-none"
           autocomplete="off"
           {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
           aria-label="{{ placeholder|default:"Search" }}"
           x-model="search"
           :class="{ 'md:w-72 xl:w-84': !search, 'md:w-72 xl:w-96': search }"
           @search.window="window.htmx.ajax('GET', $event.detail, { values: { query: search } })">
    <div class="flex absolute inset-y-0 right-0 items-center pr-2">
        <a href="{{ clear_search_url }}"
           title="Clear Search"
           aria-label="Clear Search"
           class="mr-2 text-gray-900 dark:text-gray-100 focus:outline-none focus:shadow-outline"
           x-show="search"
           x-cloak>{% heroicon_mini "x-mark" title="Clear Search" %}</a>
        <button type="submit"
                title="Search"
                aria-label="Search"
                class="text-gray-900 dark:text-gray-100 focus:outline-none focus:shadow-outline">
            {% heroicon_mini "magnifying-glass" title="Search" %}
        </button>
    </div>
</form>
