{% load i18n %}
{% translate "Search" as t_search %}
{% translate "Clear Search" as t_clear_search %}
<form action="{{ search_url|default:request.path }}"
    method="get"
    class="relative bg-transparent"
    x-data="{search: '{{ request.search.value|default:''|escapejs }}'}"
    hx-push-url="true">

    <input type="search"
        x-model="search"
        @click="$el.select()"
        name="{{ request.search.param }}"
        autocomplete="off"
        aria-label="{{ placeholder|default:_('Search') }}"
        {% if placeholder %}placeholder="{{ placeholder }}"
        {% endif %}
        class="px-2 py-1 rounded w-64 focus:outline-none focus:ring placeholder-opacity-100 text-gray-900 dark:bg-gray-900 dark:text-white text-sm md:text-base"
        :class="{
            'md:w-72 xl:w-84': !search,
            'md:w-72 xl:w-96': search
            }">

    <div class="absolute inset-y-0 right-0 flex items-center pr-2">
        <a href="{{ clear_search_url|default:request.path }}"
            title="{{ t_clear_search }}"
            class="mr-2 focus:outline-none focus:shadow-outline text-gray-900 dark:text-gray-100" x-show="search"
            x-cloak>
            {% icon "xmark" title=t_clear_search %}
        </a>
        <button type="submit"
            title="{{ t_search }}"
            class="focus:outline-none focus:shadow-outline text-gray-900 dark:text-gray-100">
            {% icon "search" title=t_search %}
        </button>
    </div>

</form>
