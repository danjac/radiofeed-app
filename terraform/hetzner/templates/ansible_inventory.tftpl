all:
  children:
    server:
      hosts:
        ${server_public_ip}:
          private_ip: ${server_private_ip}
          hostname: server
          role: server
    agents:
      hosts:
        ${database_public_ip}:
          private_ip: ${database_private_ip}
          hostname: database
          role: database
        ${jobrunner_public_ip}:
          private_ip: ${jobrunner_private_ip}
          hostname: jobrunner
          role: jobrunner
%{ for idx, ip in webapp_public_ips ~}
        ${ip}:
          private_ip: ${webapp_private_ips[idx]}
          hostname: webapp-${idx + 1}
          role: webapp
%{ endfor ~}
  vars:
    domain: "myapp.com"
    k3s_deploy_admin_url: "my-admin/"
    k3s_deploy_admins: "admin@example.com"
    k3s_deploy_contact_email: "contact@example.com"
    k3s_deploy_mailgun_api_key: ""
    k3s_deploy_mailgun_api_url: "https://api.eu.mailgun.net/v3"
    k3s_deploy_postgres_volume: "${postgres_volume_mount_path}"
    k3s_deploy_postgres_password: "CHANGE_ME" # pragma: allowlist secret
    k3s_deploy_pwa_sha256_fingerprints: ""
    k3s_deploy_secret_key: "CHANGE_ME" # pragma: allowlist secret
    k3s_deploy_secret_key_fallbacks: "" # pragma: allowlist secret
    k3s_deploy_sentry_url: ""
    # cron_schedules_override:
    #  send_episode_updates: "10 10 * * 3"
